---
title: "컴퓨터 네트워킹 요약 - 4. 네트워크 계층: 데이터 평면
last_modified_at: 2021-02-24
show_date: true
classes: wide
excerpt: ""
categories:
  - computer_networking
---

## 4.1. 네트워크 계층 개요(Overview of Network Layer)

### 4.1.1. 포워딩과 라우팅: 데이터 평면과 제어 평면(Forwarding and Routing: The Data and Control Planes)
네트워크 계층은 송신 호스트에서 수신 호스트로 패킷을 전달하는 것이다. 
네트워크 계층의 중요 기능은 다음과 같다. 

1. 포워딩(Forwarding): 패킷이 라우터의 입력 링크에 도달했을 때, 그 패킷을 적절한 출력 링크로 이동시켜야 한다. 
2. 라우팅(Routing): 패킷 경로를 결정해야 한다. 경로를 계산하는 알고리즘을 라우팅 알고리즘(routing algorithm)이라 한다. 

포워딩은 짧은 시간(몇 나노초)단위를 갖기에 보통 하드웨어에서 실행된다. 
반면에, 라우팅은 데이터그램의 출발지-목적지 경로를 결정하는데 더 긴 시간(보통 초)단위를 갖기에 보통 소프트웨어에서 실행된다. 

라우터에는 포워딩 테이블(forwarding table)이 있다. 
라우터는 패킷 헤더의 필드 값을 조사하여 패킷을 포워딩한다. 
이 값을 포워딩 테이블의 내부 색인으로 사용한다. 

#### 4.1.1.1. 제어 평면: 전통적인 접근(Control Plane: The Traditional Approach)
라우팅 알고리즘은 포워딩 테이블의 내용을 결정한다. 
라우터의 라우팅 알고리즘은 다른 라우터의 라우팅 알고리즘과 소통하며 포워딩 테이블의 값들을 계산한다(5.2~5.4절 내용). 

#### 4.1.1.2. 제어 평면: SDN 접근(Control Plane: The SDN Approach)
원격제어가 포워딩 테이블을 계산과 배분하는 동안 라우팅 기기는 포워딩만을 수행하는 제어 평면적 접근 SDN(software defined networking)도 있다. 
원격 컨트롤러가 신뢰성과 중복성을 갖춘 원격 데이터 센터에 설치될 수 있으며, 라우터와 메세지를 교환함으로써 소통할 수 있다. 
네트워크가 소프트웨어적으로 정의되었을 때, 포워딩 테이블을 계산하는 컨트롤러는 라우터와 상호작용을 하여 소프트웨어에서 실행된다. 

### 4.1.2. 네트워크 서비스 모델(Network Service Model)
네트워크 계층에서 제공할 수 있는 서비스들의 일부는 다음과 같다. 이 외에 수많은 변형들이 있다. 
* 보장된 전달: 패킷이 출발지에서 목적지까지 도착하는 것을 보장한다. 
* 지연 제한 이내의 보장된 전달: 패킷의 전달 보장뿐만 아니라 호스트간의 특정 지연 제한 안에 전달한다. 
* 순서화(in-order) 패킷 전달: 패킷이 목적지에 송신된 순서로 도착하는 것을 보장한다. 
* 최소 대역폭 보장: 송신과 수신 호스트 사이에 특정한 비트 속도의 전송 링크를 에뮬레이트(emulates)한다. 송신 호스트가 비트를 특정한 비트 속도 이하로 전송하는 한, 모든 패킷이 수신 호스트까지 전달된다. 
* 보안(security): 데이터그램을 송신 호스트에서는 암호화, 수신 호스트에서는 해독을 할 수 있게 한다. 

인터넷의 네트워크 계층은 최선형 서비스(best-effort service)라고 알려진 서비스를 제공한다. 
이는 패킷 순서, 전송, 지연, 최소 대역폭을 보장하지 않는다. 
다른 여러 네트워크 구조는 최선형 서비스보다 좋은 서비스 모델을 정의하고 구현하였다. 
예를 들어, ATM 네트워크 구조는 패킷 순서, 지연, 최소 대역폭을 보장한다. 
그럼에도 최선형 서비스 모델은 많은 애플리케이션에 "충분히 좋다"라고 입증되고 있다. 

## 4.2. 라우터 내부에는 무엇이 있을까?(What's Inside a Router?)
<figure style="width: 600px" class="align-center">
 	<img src="{{ '/assets/img/bio-photo.jpg' }}" alt=""> 
 	<figcaption>555</figcaption>
</figure> 

라우터의 네가지 요소를 다음과 같이 정의한다. 
여기서 포트라는 용어는 물리적인 입출력 라우터 인터페이스를 의미한다. 
애플리케이션 및 소켓과 관련된 포트와는 다르다. 

(1) **입력 포트**: 입력 포트는 입력 링크의 물리 계층 기능, 입력 링크의 반대편에 있는 링크 계층과 상호 운용하기 위해 필요한 링크 계층 기능을 수행한다. 
그리고 검색 기능을 수행하는데, 이는 포워딩 테이블을 참조하여 패킷이 스위칭 구조를 통해 전달되는 라우터 출력 포트를 결정한다. 
제어패킷(예: 라우팅 프로토콜 정보를 전달하는 패킷)은 입력 포트에서 라우팅 프로세서로 전달된다. 

(2) **스위칭 구조**: 스위칭 구조는 입력 포트와 출력 포트를 연결한다. 스위칭 구조는 라우터 내부에 포함되어 있다. 

(3) **출력 포트**: 출력 포트는 스위칭 구조에서 수신한 패킷을 저장하고, 필요한 링크 계층 및 물리적 계층 기능을 수행하여 출력 링크로 패킷을 전달한다. 
링크가 양방향일 때, 출력 포트는 일반적으로 동일한 링크의 입력 포트와 한 쌍을 이룬다. 

(4) **라우팅 프로세서**: 라우팅 프로세서는 제어 평면 기능을 수행한다. 기존의 라우터에선느 라우팅 프로토콜을 실행하고, 라우팅 테이블과 연결된 링크 상태 정보를 유지 관리하며 포워딩 테이블을 계산한다. 
SDN 라우터에서는 원격 컨트롤러와 통신하여, 원격 컨트롤러에서 계산된 포워딩 테이블 항목을 수신하고 입력 포트에 이 항목을 설치한다. 


