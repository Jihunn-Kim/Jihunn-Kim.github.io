---
title: "컴퓨터 네트워킹 요약 - 5. 네트워크 계층: 제어 평면
last_modified_at: 2021-02-25
show_date: true
classes: wide
excerpt: ""
categories:
  - computer_networking
---

## 5.1. 개요(Introduction)
4장에서는 네트워크 계층: 데이터 평면을 보았다. 
(1) 라우터별 제어(Per-router control): 라우팅 알고리즘이 모든 라우터 각각에서 동작한다. 
라우터는 다른 라우터의 라우팅 구성요소와 통신하여 자신의 포워딩 테이블의 값을 계산하는 라우팅 구성요소를 가지고 있다. 
5.3절, 5.4절의 OSPF, BGP 프로토콜이 이 라우터별 제어 방식을 기반으로 한다. 

(2) 논리적으로 중앙 집중된 제어(Logically centralized control): 논리적으로 집중된 컨트롤러가 포워딩 테이블을 작성하고 
이를 모든 라우터가 사용할 수 있도록 배포한다. 
컨트롤러는 각 라우터의 제어 에이전트(control agent, CA)와 상호작용하여 라우터의 플로우 테이블을 구성 및 관리한다. 
라우팅 알고리즘과 달리 CA는 서로 직접 상호 작용하지 않으며, 포워딩 테이블을 계산하는 데에도 적극적으로 참여하지 않는다. 

논리적으로 중앙 집중된 제어란, 실제로 여러 개의 라우팅 서버에 라우팅 서비스가 구현된다 하더라도, 마치 하나의 중앙 서비스 지점에 있는 것처럼 서비스에 접근한다는 의미이다. 

이 장에서는 포워딩 테이블이나 플로우 테이블이 어떻게 만들어지고, 유지, 설치되는지 알아본다. 

## 5.2. 라우팅 알고리즘(Routing Algorithms)
라우팅 알고리즘의 목표는 송신자부터 수신자까지 라우터의 네트워크를 통과하는 좋은 경로를 결정하는 것이다. 
일반적으로 좋은 경로란 최소 비용 경로를 말하지만, 네트워크 정책(예: Y 기관 라우터는 Z 기관 네트워크가 보낸 패킷을 전달하지 않는다)과 같은 문제가 고려된다. 

라우팅 문제를 나타내는 데에는 노드와 에지를 사용한 무방향성 그래프가 사용된다. 
노드는 라우터, 에지는 라우터들 간의 연결된 물리 링크를 나타낸다. 
에지는 비용을 나타내는 값을 가지는데, 일반적으로 링크의 물리적인 거리, 링크 속도 등을 반영한다. 

라우팅 알고리즘은 출발지와 목적지 간 최소 비용 경로를 찾는것을 목표로 한다. 
라우팅 알고리즘을 분류하는 방법은 여러 가지가 있다. 

첫 번째 분류 방법은 중앙 집중형인지 분산형인지이다. 
(1) 중앙 집중형 라우팅 알고리즘은 네트워크 전체에 대한 완전한 정보를 가지고 최소 비용 경로를 계산한다. 
즉, 모든 노드 사이의 연결 상태와 링크 비용을 알아야 한다. 
5.2.1절의 링크 상태 알고리즘이 이에 속한다. 

(2) 분산 라우팅 알고리즘에서는 어떤 노드도 모든 링크의 비용에 대한 완전한 정보를 갖고 있지 않다. 
각 노드는 자신에 직접 연결된 링크에 대한 정보만 가지고, 반복된 계산과 이웃 노드와의 정보 교환으로 최소 비용 경로를 계산한다. 
5.2.2절의 거리 벡터 알고리즘이 이에 속한다.

두 번째 분류 방법은 정적 알고리즘과 동적 알고리즘으로 분류하는 것이다. 
(1) 정적 라우팅 알고리즘(static routing algorithms)에서 경로는 아주 느리게 변하는데, 
보통 사람이 개입한 결과(예: 사람이 링크 비용 수정)로 그렇게 된다. 

(2) 동적 라우팅 알고리즘(Dynamic routing algorithms)은 네트워크 트래픽 부하(load)나 토폴로지 변화에 따라 라우팅 경로를 바꾼다. 
이 알고리즘은 주기적으로, 혹은 토폴로지나 링크 비용의 변경이 있을 때 실행될 수 있다. 

세 번째 분류 방법은 라우팅 알고리즘이 부하에 민감한지 아닌지에 따른다. 
(1) 부하에 민감한 알고리즘(load-sensitive algorithm)에서 링크 비용은 해당 링크의 현재 혼잡 수준을 나타내기 위해 동적으로 변한다. 
혼잡한 링크를 우회하는 경로를 택할 수 있다. 

(2) 오늘날의 인터넷 라우팅 알고리즘(RIP, OSPF, BGP 등)은 링크 비용이 현재 혼잡 수준을 반영하지 않기 때문에 
부하에 민감하지 않다(load-insensitive).

### 5.2.1. 링크 상태 라우팅 알고리즘(The Link-State (LS) Routing Algorithm)
링크 상태 알고리즘에는 네트워크 토폴로지와 모든 링크 비용이 알려져 있어야 한다. 
이는 각 노드가 자신과 연결된 링크의 식별자와 비용을 포함하는 링크 상태 패킷을 네트워크상의 모든 다른 노드로 브로드캐스팅 함으로써 가능하다. 
실제로 이 방식은 링크 상태 브로드캐스트 알고리즘에 의해 수행된다. 

링크 상태 알고리즘은 다익스트라 알고리즘을 사용할 수 있다. 
다익스트라 알고리즘은 하나의 노드에서 네트워크 내 모든 다른 노드로의 최소 비용 경로를 계산한다. 
힙 자료 구조를 사용하여 로그급수 시간으로 최솟값을 찾을 수 있다. 

만약 링크 비용이 링크상에 전송 중인 부하를 반영한다면, 문제가 생길 수도 있다. 
그림 5.5와 같이 동시에 라우터가 더 좋은 경로를 업데이트하여 트래픽을 전달하면, (c)-(d) 상태를 계속 반복할 수도 있다. 
이와 같은 진동(oscillation) 문제는 링크 상태 알고리즘뿐 아니라 혼잡이나 지연 시간을 기반으로 링크 비용을 산출하는 모든 알고리즘에서 발생할 수 있다. 

해결책으로는 모든 라우터가 동시에 링크 상태 알고리즘을 실행하지 못하도록 하는 방법이 있다. 
링크 상태 정보를 송신하는 시각을 랜덤하게 결정한다. 

<figure style="width: 600px" class="align-center">
 	<img src="{{ '/assets/img/bio-photo.jpg' }}" alt=""> 
 	<figcaption>그림 5.5 , 10</figcaption>
</figure> 

### 5.2.2. 거리 벡터 라우팅 알고리즘(The Distance-Vector (DV) Routing Algorithm)
